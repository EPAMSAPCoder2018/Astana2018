<mvc:View controllerName="com.epam.ui.controller.routes" xmlns="sap.m" xmlns:mvc="sap.ui.core.mvc" xmlns:core="sap.ui.core"
	xmlns:vbm="sap.ui.vbm" xmlns:l="sap.ui.layout" height="85%" displayBlock="true">
	<OverflowToolbar>
		<Button type="Up" text="Back" press="onBackButtonPress" visible="{mapData>/backButtonVisible}"/>
		<ToolbarSpacer/>
		<Text text="Status:" class="sapUiSmallMargin"/>
		<ComboBox class="sapUiSmallMarginEnd" items="{routesFiltersModel>/items}" selectionChange="onFiltersChanged"
			selectedKey="{routesFiltersModel>/selectedKey}">
			<core:Item key="{routesFiltersModel>key}" text="{routesFiltersModel>name}"/>
		</ComboBox>
	</OverflowToolbar>
	
	<l:FixFlex>
		<l:flexContent>
			<vbm:GeoMap id="vbi" width="100%" height="100%" initialZoom="12" initialPosition="27.554899;53.904651" vos="{mapData>/results}">
				<vbm:vos>
					<vbm:Routes templateShareable="false" items="{mapData>stages}">
						<vbm:items>
							<vbm:Route templateShareable="false" position="{mapData>vector/coordinates}" tooltip="{mapData>geoFromName} - {mapData>geoToName}" end="0" start="0" color="{mapData>color}" click="onClickRoute"/>
						</vbm:items>
					</vbm:Routes>
				</vbm:vos>
				<vbm:legend>
					<vbm:Legend id="requestsLegend" caption="Routes" items="{mapData>/results}">
						<vbm:items>
							<vbm:LegendItem text="{= (${mapData>orinalOrder} !== undefined ? 'Order ' : 'Stage ') + ${mapData>index} + ': ' + ${mapData>createDate} }" semanticSpotType="Warning" click="onLegendItemClick"/>
						</vbm:items>
					</vbm:Legend>
				</vbm:legend>
			</vbm:GeoMap>
		</l:flexContent>
	</l:FixFlex>
</mvc:View>